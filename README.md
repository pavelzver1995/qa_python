# Тестовое покрытие для BooksCollector

## Описание тестов

В проекте реализовано 20 тестов для полного покрытия функциональности класса `BooksCollector`. Все тесты используют фикстуру для создания изолированных экземпляров класса.

### Фикстуры
- **collector** - создает новый экземпляр BooksCollector для каждого теста

### Тесты методов добавления и управления книгами

#### 1. test_add_new_book_add_two_books
- **Цель**: Проверить добавление нескольких книг
- **Проверяет**: Метод `add_new_book` корректно добавляет несколько книг
- **Использует**: `get_books_genre()`

#### 2. test_add_new_book_book_added_with_empty_genre
- **Цель**: Проверить добавление книги с пустым жанром
- **Проверяет**: Новая книга добавляется с пустым жанром
- **Проверка**: Прямой доступ к `books_genre`

#### 3. test_add_new_book_invalid_name_not_added
- **Цель**: Проверить обработку некорректных названий
- **Проверяет**: Книги с пустым названием или длиной >40 символов не добавляются
- **Использует параметризацию** для различных некорректных названий

#### 4. test_add_new_book_duplicate_not_added
- **Цель**: Проверить запрет на дубликаты
- **Проверяет**: Одинаковые книги не добавляются повторно
- **Проверка**: Прямой доступ к `books_genre`

### Тесты управления жанрами

#### 5. test_set_book_genre_valid_book_and_genre
- **Цель**: Проверить установку корректного жанра
- **Проверяет**: Метод `set_book_genre` устанавливает жанр для существующей книги
- **Проверка**: Прямой доступ к `books_genre`

#### 6. test_set_book_genre_invalid_genre_not_set
- **Цель**: Проверить обработку несуществующих жанров
- **Проверяет**: Жанр не устанавливается, если он не в списке допустимых
- **Проверка**: Прямой доступ к `books_genre`

#### 7. test_set_book_genre_nonexistent_book_not_set
- **Цель**: Проверить обработку несуществующих книг
- **Проверяет**: Жанр не устанавливается для несуществующей книги
- **Проверка**: Прямой доступ к `books_genre`

### Тесты получения информации о книгах

#### 8. test_get_book_genre_returns_correct_genre
- **Цель**: Проверить получение жанра книги
- **Проверяет**: Метод `get_book_genre` возвращает правильный жанр
- **Подготовка**: Прямая установка жанра в `books_genre`

#### 9. test_get_book_genre_nonexistent_book_returns_none
- **Цель**: Проверить обработку несуществующих книг
- **Проверяет**: `get_book_genre` возвращает None для несуществующей книги

#### 10. test_get_books_with_specific_genre_returns_correct_books
- **Цель**: Проверить фильтрацию по жанру
- **Проверяет**: Метод `get_books_with_specific_genre` возвращает книги нужного жанра
- **Подготовка**: Прямая установка данных в `books_genre`

#### 11. test_get_books_with_specific_genre_invalid_genre_returns_empty_list
- **Цель**: Проверить обработку несуществующих жанров
- **Проверяет**: Для несуществующего жанра возвращается пустой список

#### 12. test_get_books_genre_returns_current_dict
- **Цель**: Проверить получение всего словаря книг
- **Проверяет**: Метод `get_books_genre` возвращает текущий словарь
- **Подготовка**: Прямая установка данных в `books_genre`

#### 13. test_get_books_for_children_excludes_age_rated_books
- **Цель**: Проверить фильтр детских книг
- **Проверяет**: Исключаются книги с возрастным рейтингом ('Ужасы', 'Детективы')
- **Подготовка**: Прямая установка данных в `books_genre`

### Тесты работы с избранным

#### 14. test_add_book_in_favorites_valid_book
- **Цель**: Проверить добавление в избранное
- **Проверяет**: Метод `add_book_in_favorites` добавляет существующую книгу
- **Проверка**: Прямой доступ к `favorites`

#### 15. test_add_book_in_favorites_nonexistent_book_not_added
- **Цель**: Проверить обработку несуществующих книг
- **Проверяет**: Несуществующие книги не добавляются в избранное
- **Проверка**: Прямой доступ к `favorites`

#### 16. test_add_book_in_favorites_duplicate_not_added
- **Цель**: Проверить запрет дубликатов в избранном
- **Проверяет**: Одна книга добавляется в избранное только один раз
- **Проверка**: Прямой доступ к `favorites`

#### 17. test_delete_book_from_favorites_existing_book
- **Цель**: Проверить удаление из избранного
- **Проверяет**: Метод `delete_book_from_favorites` удаляет существующую книгу
- **Подготовка**: Прямая установка данных в `favorites`

#### 18. test_delete_book_from_favorites_nonexistent_book_no_error
- **Цель**: Проверить обработку несуществующих книг
- **Проверяет**: Удаление несуществующей книги не вызывает ошибок
- **Подготовка**: Прямая установка данных в `favorites`

#### 19. test_get_list_of_favorites_books_returns_current_list
- **Цель**: Проверить получение списка избранного
- **Проверяет**: Метод `get_list_of_favorites_books` возвращает текущий список
- **Подготовка**: Прямая установка данных в `favorites`

## Ключевые особенности реализации

### Изоляция тестов
- Каждый тест получает свежий экземпляр BooksCollector через фикстуру
- Нет зависимостей между тестами
- Предсказуемая среда выполнения

### Прямой доступ к данным
- Для проверок используется прямой доступ к атрибутам (`books_genre`, `favorites`)
- Минимальное использование методов класса в подготовительной фазе
- Четкое разделение тестируемого функционала

### Полное покрытие методов
- Все публичные методы класса покрыты тестами
- Проверены граничные случаи и обработка ошибок
- Тесты сфокусированы на одной ответственности

### Параметризация
- Используется для тестирования различных некорректных входных данных
- Уменьшает дублирование кода

## Используемые технологии
- pytest для тестирования
- Фикстуры для изоляции тестов
- Параметризация для тестов с различными входными данными
- Прямой доступ к атрибутам для чистоты тестов